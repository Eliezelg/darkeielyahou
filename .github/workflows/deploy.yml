name: DÃ©ploiement automatique sur VPS

on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout du code
      uses: actions/checkout@v3

    - name: DÃ©ploiement via SSH
      uses: appleboy/ssh-action@v0.1.8
      with:
        host: ${{ secrets.VPS_HOST }}
        username: ${{ secrets.VPS_USER }}
        key: ${{ secrets.VPS_SSH_KEY }}
        port: 22
        script: |
          set -e

          echo "ðŸš€ DÃ©but du dÃ©ploiement"
          
          # Aller Ã  la racine du projet
          cd ~/app/darkeielyahou
          
          # Pull du code depuis le repo principal
          echo "ðŸ“¥ RÃ©cupÃ©ration du code..."
          git pull origin main
          
          # Rendre le script de dÃ©ploiement exÃ©cutable et l'exÃ©cuter
          echo "ðŸš€ ExÃ©cution du script de dÃ©ploiement..."
          chmod +x deploy.sh
          ./deploy.sh
          
          echo "âœ… DÃ©ploiement terminÃ© avec succÃ¨s"
